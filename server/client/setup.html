<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Golk</title>
    <link rel="shortcut icon" type="image/png" href="./favicon.png"/>
    <style>
      html {
        font-family: sans-serif;
        font-size: large;
        line-height: 1.4;
      }
      input[type=text] {
        padding: 4px;
        min-width: 20rem;
      }
      section {
        margin-bottom: 0.5rem;
      }
      label {
        display: inline-block;
        min-width: 10rem;
      }
    </style>
  </head>
  <body>
    <section id='#setup'>
      <section>
        <label for='endpoint'>API Endpoint</label>
        <input type='text' id='endpoint' name='endpoint' />
      </section>
      <section>
        <label for='apiKey'>API Key</label>
        <input type='text' id='apiKey' name='apiKey' />
      </section>
      <button type='button' id='saveButton'>Save</button>
    </section>
    <script>
      const storedEndpoint = localStorage.getItem('endpoint');
      const storedApiKey = localStorage.getItem('apiKey');

      if (storedEndpoint !== null && storedApiKey !== null) {
        // redirect
        window.location.replace('./index.html');
      }

      document.querySelector('#saveButton').addEventListener('click', e => {
        const $btn = e.target;
        const endpoint = document.querySelector('input#endpoint').value;
        const apiKey = document.querySelector('input#apiKey').value;

        localStorage.setItem('endpoint', endpoint);
        localStorage.setItem('apiKey', apiKey);

        window.location.replace('./index.html');
      });
    </script>
  </body>
</html>
